syntax = "proto3";

package http;
option go_package = ".;http";

message Message {
  string url = 1;

  enum Method {
    GET = 0;
    POST = 1;
    PUT = 2;
    PATCH = 3;
  }

  Method method = 3;
  map<string,string> headers = 4;
  string payload = 5;
  int32 statusCode = 6;
}

message HTTPRequest {
  string api = 1;
  repeated Message message = 2;
}

message HTTPResponse {
  Message message = 1;
}

service HTTPForkJoinService {
  rpc FanoutFanin(HTTPRequest) returns (stream HTTPResponse);
}